<!DOCTYPE html>
<html lang="en">
    
    <head>

        
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135109602-1"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-135109602-1');
        </script>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
        <title>
    Unit testing | Nitin Patil
</title>
    
        <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    
        <meta name="generator" content="Hugo 0.53" />
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
        
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
        
        
        <link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/syntax.css">

        
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
              TeX: { extensions: ["autobold.js"]
                    },
              MathML: {
                    extensions: ["mml3.js", "content-mathml.js"]
                    },
              tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] }
            });
        </script>

        <script type="text/javascript" async
          src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async>
        </script>
    
    </head>

    <body>
        
        
        <section id="nav-bar">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container">
                    <a class="navbar-brand" href="/">Nitin Patil</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav mr-auto"></ul>
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="/projects/projects">Projects</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/about/me">About</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </section>


        
        <section id="page-content">
            
<page_content>
    <header>
        <div class="container">
            <div class="note-title">
                <h1 class="title">Unit testing</h1>

                <div class="note-meta">
                    <div class="date">
                        <span class="posted-on">
                                
                            <i class="fa fa-calendar"></i>
                            <time datetime='2019-01-25T19:14:46&#43;05:30'>
                                January 25, 2019
                            </time>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="post-content">
            

<p>We should write the test cases to test our software. These tests ensures no regression in existing functionality while adding new changes to the code.</p>

<h2 id="pytest">pytest</h2>

<p><code>pytest</code> is a framework that makes building simple and scalable tests easy. Tests are expressive and readable—no boilerplate code required. pytest test cases are a series of functions in a Python file starting with the name test_.</p>

<h3 id="install">Install</h3>

<p>Run the following command in your command line:</p>
<div class="highlight"><pre class="chroma">pip install -U pytest</pre></div>
<h3 id="create-test">Create test</h3>

<p>In order to understand the complete picture, before creating a test, let&rsquo;s create a sample functionality to test.</p>

<p>Here we will implement a functionality which will multiply given two numbers. Create a new project folder and, inside that, create a new folder called my_multi. Inside my_multi, create an empty file called <code>__init__.py</code>. Creating the <code>__init__.py</code> file means that the my_multi folder can be imported as a module from the parent directory.</p>
<div class="highlight"><pre class="chroma">project/
│
└── my_multi/
    └── __init__.py
        multi.py</pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># content of multi.py</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span></code></pre></div>
<p>You can add your test directly under project folder or under sub-folder. I added it under <code>tests</code>. The test file name should either start or end with <code>test</code>. So that test runner will assume that the python file contains tests to be executed. Similarly the test case should also start with <code>test_</code></p>
<div class="highlight"><pre class="chroma">project/
│
├── my_multi/
│   └── __init__.py
|       multi.py
|
└── tests/
    └── __init__.py
        test_multi.py</pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># content of test_multi.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">from</span> <span class="nn">my_multi</span> <span class="kn">import</span> <span class="n">multiply</span>

<span class="k">def</span> <span class="nf">test_multiplication</span><span class="p">():</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">multiply</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span></code></pre></div>
<h3 id="run-test">Run test</h3>

<p>You can invoke testing through the Python interpreter from the command line</p>
<div class="highlight"><pre class="chroma">python -m pytest tests/

    Or simply

pytest tests/</pre></div>
<p>pytest dumps pass or fail results</p>
<div class="highlight"><pre class="chroma">============================= test session starts =============================
platform win32 -- Python 3.6.5, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: project, inifile:
plugins: remotedata-0.2.1, openfiles-0.3.0, doctestplus-0.1.3, arraydiff-0.2
collected 1 items

tests\test_multi.py ...                                           [100%]

========================== 1 passed in 0.02 seconds ===========================</pre></div>
<p>I purposefully changed the <code>multiply</code> function to divide <code>a</code> by <code>b</code>. So now our test failed showing the call stack.</p>
<div class="highlight"><pre class="chroma">============================= test session starts =============================
platform win32 -- Python 3.6.5, pytest-3.5.1, py-1.5.3, pluggy-0.6.0
rootdir: project, inifile:
plugins: remotedata-0.2.1, openfiles-0.3.0, doctestplus-0.1.3, arraydiff-0.2
collected 1 items

tests\test_multi.py F..                                           [100%]
================================== FAILURES ===================================
_____________________________ test_multiplication _____________________________

    def test_multiplication():
&gt;       assert (multiply(2, 3) == 6)
E       assert 0 == 6
E        +  where 0 = multiply(2, 3)

tests\test_multi.py:14: AssertionError
===================== 1 failed in 0.02 seconds ======================</pre></div>
<h3 id="other-options-to-run-tests">Other options to run tests</h3>

<p>You can use <code>-v</code> for verbose result, like status of each test ran.</p>
<div class="highlight"><pre class="chroma">pytest -v /path/to/test_file.py</pre></div>
<p>If you have mulptiple tests in a file and only wants to run specific test out them, you can do as below.</p>
<div class="highlight"><pre class="chroma">pytest -v /path/to/test_file.py::test_name</pre></div>
<h2 id="references">References</h2>

<ul>
<li><a href="https://docs.pytest.org/en/latest/">https://docs.pytest.org/en/latest/</a></li>
<li><a href="https://realpython.com/python-testing/">https://realpython.com/python-testing/</a></li>
<li><a href="https://stackoverflow.com/a/46688921/9097885">https://stackoverflow.com/a/46688921/9097885</a></li>
</ul>

        </div>
    </div>
</page_content>

        </section>
    

        
        <footer class="footer text-center">
            <div class="container">
                <span class="text-muted">Copyright &copy; Nitin Patil, <time datetime="2019">2019</time></span>
            </div>
        </footer>
    
    </body>

</html>
